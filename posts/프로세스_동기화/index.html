<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="프로세스 동기화" /><meta property="og:locale" content="en" /><meta name="description" content="Bogeun’s blog for studying development. c java spring jpa computer science architecture network database operating system" /><meta property="og:description" content="Bogeun’s blog for studying development. c java spring jpa computer science architecture network database operating system" /><link rel="canonical" href="https://idiot2222.github.io/posts/%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4_%EB%8F%99%EA%B8%B0%ED%99%94/" /><meta property="og:url" content="https://idiot2222.github.io/posts/%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4_%EB%8F%99%EA%B8%B0%ED%99%94/" /><meta property="og:site_name" content="Bogeun" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-10-15T13:00:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="프로세스 동기화" /><meta name="twitter:site" content="@twitter_username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-10-15T13:00:00+09:00","datePublished":"2022-10-15T13:00:00+09:00","description":"Bogeun’s blog for studying development. c java spring jpa computer science architecture network database operating system","headline":"프로세스 동기화","mainEntityOfPage":{"@type":"WebPage","@id":"https://idiot2222.github.io/posts/%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4_%EB%8F%99%EA%B8%B0%ED%99%94/"},"url":"https://idiot2222.github.io/posts/%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4_%EB%8F%99%EA%B8%B0%ED%99%94/"}</script><title>프로세스 동기화 | Bogeun</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Bogeun"><meta name="application-name" content="Bogeun"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/img/main/stadium.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Bogeun</a></div><div class="site-subtitle font-italic">보근의 공부 블로그</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/books/" class="nav-link"> <i class="fa-fw fas fa-book ml-xl-3 mr-xl-3 unloaded"></i> <span>BOOKS</span> </a><li class="nav-item"> <a href="/lectures/" class="nav-link"> <i class="fa-fw fas fa-university ml-xl-3 mr-xl-3 unloaded"></i> <span>LECTURES</span> </a><li class="nav-item"> <a href="/study/" class="nav-link"> <i class="fa-fw far fa-school fa-fw ml-xl-3 mr-xl-3 unloaded"></i> <span>STUDY</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/idiot2222" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['pky2892','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>프로세스 동기화</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>프로세스 동기화</h1><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1685731179796135" crossorigin="anonymous"></script><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1665806400" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Oct 15, 2022 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/username">idiot2222</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="3782 words"> <em>21 min</em> read</span></div></div></div><div class="post-content"><p><br /> <br /> <br /> <br /></p><h1 id="프로세스-동기화란">프로세스 동기화란</h1><ul><li>Independent Process<ul><li>다른 프로세스에게 영향을 주지도 받지도 않는 프로세스</ul><li>Cooperating Process<ul><li>다른 프로세스에게 영향을 주거나 받는 프로세스<li>프로세스 간 통신<ul><li>전자 우편, 파일 전송 등</ul><li>프로세스 간 자원 공유<ul><li>티켓 예매, 주식 거래 등 데이터베이스 접근 등</ul></ul><li>공유 데이터에 동시에 2개 이상의 프로세스가 접근하면 데이터 불일치(data inconsistency)가 발생할 수 있다.<li><p>데이터의 일관성(data consistency)을 유지하기 위해서 프로세스 동기화가 필요하다.</p><li>Bank Account Problem<ul><li>동기화 문제에 대한 예시이다.<li>0원 밖에 없는 계좌가 있다.<ul><li>입금은 (계좌 잔액) 0원 + (입금할 금액) 100원 = 100원 이런 방식으로 진행된다.</ul><li>A와 B가 동시에 계좌에 100원을 입금했다.<ul><li>A의 입금 과정은 0 -&gt; 100<li>B의 입금 과정 역시 0 -&gt; 100</ul><li>200원을 입금했지만 100원은 증발해 버렸다.</ul></ul><p><br /> <br /> <br /> <br /></p><h1 id="임계-구역">임계 구역</h1><ul><li>Critical Section<li>2개 이상의 프로세스 혹은 쓰레드가<ul><li>디비의 테이블이나 코드의 공유 변수 등 공유 자원에<li>접근하여 변경을 일으킬 수 있는 영역을 말한다.</ul><li><p>간단하게 말하면 다른 애들이랑 같이 쓰는 걸 바꿔서 피해를 줄 수 있으니까 조심해야 되는 부분이다.</p><li>Solutions<ul><li>임계 구역 문제를 해결하기 위한 조건은 세 가지가 있다.<li>Mutual Execution<ul><li>상호 배제<li>하나의 쓰레드만 임계 구역에 진입할 수 있어야 한다.</ul><li>Progress<ul><li>진행<li>임계 구역에 진입할 쓰레드의 결정은 유한 시간 내에 결정되어야 한다.</ul><li>Bounded Waiting<ul><li>유한 대기<li>임계 구역 진입을 대기하는 모든 쓰레드는 유한 시간 내에 임계 구역에 들어갈 수 있어야 한다.</ul><li>이 세 가지를 모두 만족해야 임계 구역 문제를 해결할 수 있다.</ul></ul><p><br /> <br /> <br /> <br /></p><h1 id="프로세스쓰레드-동기화">프로세스/쓰레드 동기화</h1><ul><li>프로세스 동기화를 통해 얻을 수 있는 것은 세 가지가 있다.<ul><li>임계 구역 문제 해결 (예상과 다른 값이 나오지 않음)<li>프로세스 실행 순서 제어<li>busy wait 등의 비효율성 제거</ul><li>프로세스 동기화에 사용하는 도구는 다음과 같다.<ul><li>Semaphores<li>Monitor</ul></ul><p><br /> <br /></p><h2 id="semaphore"><span class="mr-2">Semaphore</span><a href="#semaphore" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>세마포는 상호 배제를 위한 소프트웨어 도구이다.<li>구성은 간단하게 세 가지가 있다.<ul><li>number of permit<ul><li>임계 구역 내부에 들어간 프로세스가 몇 개인지 세기 위한 값</ul><li>acquire()<ul><li>임계 구역에 진입하려는 프로세스가 있으면 호출된다.</ul><li>release()<ul><li>임계 구역에서 나가는 프로세스가 있으면 호출된다.</ul></ul><li>간단하게 설명하면 임계 구역에 들어간 프로세스가 없으면 들여보내 주고<ul><li>임계 구역에 이미 누가 있으면 잡아뒀다가<li>임계 구역에서 나가는 애가 있으면 잡아뒀던 애들 중에 하나를 들여보내 준다.<li>이렇게 하면 한 번에 하나만 임계 구역에 들어갈 수 있다.</ul></ul><p><br /></p><p><img data-src="/assets/img/posting/os/semaphore.gif" alt="img-description" data-proofer-ignore> <em>Semaphore</em></p><p><br /></p><ol><li>임계 구역에 프로세스 A가 들어가려 한다.<ul><li>acquire() 호출<li>아무도 없으니 통과</ul><li>임계 구역에 프로세스 B, C, D가 차례대로 접근해 왔다.<ul><li>A가 이미 있으니 B, C, D 모두 세마포 내부의 큐에 잡힌다.</ul><li>A가 임계 구역을 나가면서 release()를 호출한다.<ul><li>잡혀있던 B가 풀려나서 임계 구역에 들어간다.</ul><li>이를 반복한다.</ol><p><br /> <br /> <br /> <br /></p><h1 id="전통적인-동기화-문제">전통적인 동기화 문제</h1><ul><li>Producer and Consumer Problem<ul><li>생산자 소비자 문제<li>유한 버퍼 문제 (Bounded Buffer Problem)</ul><li>Readers-Writers Problem<ul><li>공유 데이터베이스 접근</ul><li>Dinning Philosopher Problem<ul><li>식사하는 철학자 문제</ul></ul><p><br /> <br /></p><h2 id="producer-and-consumer-problem"><span class="mr-2">Producer and Consumer Problem</span><a href="#producer-and-consumer-problem" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><br /></p><p><img data-src="/assets/img/posting/os/producer_consumer-01.png" alt="img-description" data-proofer-ignore> <em>Producer &amp; Consumer</em></p><p><br /></p><ul><li>생산자와 소비자<ul><li>생산자가 데이터를 생산하면, 소비자가 그것을 소비한다.<ul><li>컴파일러가 고급 언어를 어셈블리어로 생산하면, 어셈블러가 그 어셈블리어를 소비한다.<li>서버가 데이터를 생산하면, 클라이언트는 데이터를 받아서 소비한다.</ul></ul><li>유한 버퍼<ul><li>버퍼는 생산자와 소비자 사이의 창고 같은 개념이다.<ul><li>생산자의 생산 속도와 소비자의 소비 속도 차이의 갭을 줄이기 위해 만들어졌다.</ul><li>생산자는 데이터를 생산하여 버퍼에 저장한다.<ul><li>버퍼가 가득 차면 더 넣을 수 없다.</ul><li>소비자는 버퍼에서 데이터를 가져와 소비한다.<ul><li>버퍼가 비어 있으면 빼낼 수 없다.</ul></ul><li>busy-waiting<ul><li>cpu가 다른 일은 하지 못하고 대기만 하는 현상이다.<ul><li>위에서 말한대로 생산자는 버퍼가 가득 찼는지, 소비자는 비어 있는지 체크가 필요하다.<li>버퍼 체크가 계속 되는 동안 cpu를 잡아먹는 현상이 발생한다.</ul></ul></ul><p><br /> <br /></p><ul><li>생산자 소비자 문제<ul><li>생산자 소비자 문제에서 사용하는 데이터<ul><li>in<ul><li>다음에 생산되어 들어올 데이터의 버퍼 포인터</ul><li>out<ul><li>다음에 소비되어 나갈 데이터의 버퍼 포인터</ul><li>count<ul><li>버퍼 내의 소비되지 않은 데이터 개수<li>생산되면 ++;<li>소비되면 –;</ul></ul><li>count와 버퍼는 생산자와 소비자가 같이 사용하는 공유 데이터이다.<ul><li>공유 데이터에 대한 동시적인 업데이트가 일어날 수 있다.<ul><li>즉, 임계 구역에 동시에 접근하는 꼴이다.</ul><li>count가 이상한 값을 가지는 등의 잘못된 결과가 나타날 수 있다.</ul></ul><li>생산자 소비자 문제 해결을 위해 세마포를 이용한다.<ul><li>상호 배제<ul><li>임계 구역에 대한 접근을 제한한다.<li>생산자가 생산을 위해 임계 구역에 들어갔을 때 소비자를 잡아둔다. acquire()<ul><li>생산이 끝나면 release()</ul><li>소비자가 소비를 위해 임계 구역에 들어갔을 때 생산자를 잡아둔다. acquire()<ul><li>소비가 끝나면 release()</ul></ul><li>busy-waiting 해소<ul><li>프로세스를 세마포의 큐에 잡아둔다.<li>생산자가 생산하려 할 때 버퍼가 가득찼으면 acquire() 호출, 소비자가 소비할 때 release() 호출한다.<li>소비자가 소비하려 할 떄 버퍼가 비었으면 acquire() 호출, 생산자가 생산할 때 release() 호출한다다.</ul></ul></ul><p><br /></p><p><img data-src="/assets/img/posting/os/producer_consumer-02.png" alt="img-description" data-proofer-ignore> <em>Producer &amp; Consumer</em></p><p><br /></p><ul><li>초록색 세마포<ul><li>임계 구역에 생산자 혹은 소비자 하나만 들어갈 수 있다.<ul><li>count, 버퍼 등의 공유 데이터에 하나씩만 접근하여 정확한 데이터를 유지할 수 있다.</ul></ul><li>빨간색 세마포<ul><li>소비자가 소비하려는데 버퍼가 비어있을 때 busy-waiting을 방지할 수 있다.<li>생산자가 생산을 하고 release() 해주면 그때 소비를 다시 시작한다.</ul><li>파란색 세마포<ul><li>생산자가 생산하려는데 버퍼가 꽉 차있을 때 busy-waiting을 방지할 수 있다.<li>소비자가 소비를 하고 release() 해주면 그때 생산을 다시 시작한다.</ul></ul><p><br /> <br /></p><h2 id="readers-writers-problem"><span class="mr-2">Readers Writers Problem</span><a href="#readers-writers-problem" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>공유 데이터베이스에 관한 문제이다.<ul><li>Readers<ul><li>데이터베이스를 조회만 하는 사람</ul><li>Writer<ul><li>삽입, 수정, 삭제 등 데이터 변경 작업을 하는 사람</ul></ul><li>문제 상황<ul><li>누군가 데이터를 조회하거나 수정하고 있을 때<li>다른 writer가 또 데이터를 수정하면 데이터 정합성 문제가 발생한다.</ul><li>해결 방안<ul><li>reader가 데이터를 조회할 때,<ul><li>다른 reader는 얼마든지 접근 가능<li>writer는 접근 불가능</ul></ul></ul><p><br /> <br /></p><h2 id="dinning-philosopher-problem"><span class="mr-2">Dinning Philosopher Problem</span><a href="#dinning-philosopher-problem" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><br /></p><p><img data-src="/assets/img/posting/os/dinning_philosopher-01.png" alt="img-description" data-proofer-ignore> <em>Dinning Philosopher Problem</em></p><p><br /></p><ul><li>식사하는 철학자 문제<ul><li>철학자는 다음과 같은 동작을 한다.<ul><li>생각한다.<li>식사한다.</ul><li>식사를 위해서는 젓가락이 필요하다.<ul><li>왼쪽 젓가락을 집는다.<li>오른쪽 젓가락을 집는다.</ul></ul><li>문제 발생<ul><li>모든 철학자가 동시에 생각을 끝내고, 식사를 하려고 한다.<li>모든 철학자가 동시에 왼쪽 젓가락을 집었다.<li>이제 오른쪽 젓가락을 집으려고 보니 없어서 대기한다.<li>모든 철학자가 오른쪽 젓가락을 기다리게 된다.<li>모든 철학자가 기아 상태가 된다.</ul></ul><p><br /> <br /> <br /> <br /></p><h1 id="deadlock">Deadlock</h1><ul><li>교착 상태<li>프로세스는 실행을 위해서는 여러 자원이 필요하다.<ul><li>CPU, Memory, I/O 등</ul><li>그러나 내가 필요한 리소스를 다른 프로세스가 사용중이라면 대기해야 한다.<ul><li>이때 내가 키보드를 점유한 상태로 다른 프로세스가 갖고 있는 마우스를 대기하고 있다.<li>마우스를 점유한 프로세스는 내가 갖고 있는 키보드를 대기하고 있다.<li>이런 상황을 교착 상태라고 한다.</ul><li>교착 상태를 위한 필요 조건<ul><li>Mutual Execution<ul><li>상호 배제<li>누가 사용하는 리소스에 다른 프로세스가 접근할 수 없다.</ul><li>Hold and Wait<ul><li>보유 및 대기<li>본인이 필요한 다른 리소스를 점유한 상태로 또 다른 필요 리소스를 대기한다.</ul><li>No preemption<ul><li>비선점<li>다른 프로세스가 점유한 리소스를 뺏을 수 없다.</ul><li>Circular Waiting<ul><li>환형 대기<li>꼬리에 꼬리를 무는 형태로 대기를 하고 있는 상태</ul></ul><li>이 네 가지를 모두 만족하면 교착 상태에 빠지게 된다.</ul><p><br /> <br /></p><h2 id="자원-할당도"><span class="mr-2">자원 할당도</span><a href="#자원-할당도" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>어느 프로세스가 어떤 자원을 요청했는지, 어느 프로세스가 어떤 자원을 점유 중인지를 그린 그림이다.<li>자원 할당도를 통해 교착 상태를 파악하기 쉬워진다.</ul><p><br /></p><p><img data-src="/assets/img/posting/os/dinning_philosopher-02.png" alt="img-description" data-proofer-ignore> <em>식사하는 철학자 문제 자원 할당도</em></p><p><br /></p><ul><li>네모<ul><li>젓가락(리소스)<li>네모가 가리키는 하늘색 화살표가 네모를 점유중인 프로세스</ul><li>동그라미<ul><li>철학자(프로세스)<li>동그라미가 가리키는 연두색 화살표가 동그라미가 요청중인 리소스</ul></ul><p><br /> <br /></p><h2 id="deadlock-prevention"><span class="mr-2">Deadlock Prevention</span><a href="#deadlock-prevention" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>교착 상태 방지<li>교착 상태의 필요 조건 네 가지 중 하나라도 깨면 교착 상태를 방지할 수 있다.<ul><li>상호 배제<ul><li>자원을 공유 가능하게 한다.<li>대부분의 자원에 대해 이 방법은 불가능하다.<ul><li>파일 정도</ul></ul><li>보유 및 대기<ul><li>자원을 점유하고 다른 자원을 요청하지 못하게 한다.<li>필요한 자원을 대기할 때 점유하고 있던 모든 자원의 점유를 포기하고 대기한다.<ul><li>기아 현상 발생 가능, 자원 활용률 저하</ul></ul><li>비선점<ul><li>자원을 선점 가능하게 한다.<li>대부분의 자원에 대해 이 방법은 불가능하다.<ul><li>cpu 정도</ul></ul><li>환형 대기<ul><li>자원에 번호를 부여하고, 번호의 오름차순으로 자원을 요청한다.<ul><li>자원 활용률 저하</ul></ul></ul></ul><p><br /></p><p><img data-src="/assets/img/posting/os/dinning_philosopher-03.png" alt="img-description" data-proofer-ignore> <em>환형 대기 예시</em></p><p><br /></p><ul><li>자원들에 각각 R1~R5으로 번호가 붙어져 있다.<li>P1~P4는 번호의 오름차순 순으로 자원을 요청한다.<ul><li>P1의 경우 R1 -&gt; R2<li>P2의 경우 R2 -&gt; R3<li>P3의 경우 R3 -&gt; R4<li>P4의 경우 R4 -&gt; R5</ul><li>P5의 경우만 R1 -&gt; R5으로 방향이 다르다.<li>이런 방식으로 환형을 깰 수 있다.</ul><p><br /> <br /></p><h2 id="deadlock-avoidance"><span class="mr-2">Deadlock Avoidance</span><a href="#deadlock-avoidance" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>교착 상태 회피<li>프로세스가 필요한 리소스를 할당해주는 것이 os이다.<li>os의 적절한 리소스 분배로 교착 상태가 일어날 상황을 회피할 수 있다.</ul><div class="table-wrapper"><table><thead><tr><th>프로세스<th>현재 필요한 리소스의 수<th>최대로 필요한 리소스의 수<tbody><tr><td>P1<td>5<td>10<tr><td>P2<td>2<td>4<tr><td>P3<td>2<td>9</table></div><ul><li>os는 총 12개의 리소스를 보유하고 있다.<li>모든 프로세스가 교착 상태를 피할 수 있으려면 os는 리소스를 어떻게 할당해야 할까<ol><li>세 프로세스 모두에게 현재 필요한 리소스만큼 할당해준다.<ul><li>12 - 9 = 3</ul><li>한 프로세스를 끝내고, 걔가 점유하고 있던 리소스를 반환받기 위해서 P2가 필요한 2개의 리소스를 추가로 할당한다.<ul><li>3 - 2 = 1<li>P2 종료, 1 + 4 = 5</ul><li>다음으로 종료할 수 있는 P1에 나머지를 할당한다.<ul><li>5 - 5 = 0<li>P1 종료, 0 + 10 = 10</ul><li>P3에 할당한다.<ul><li>10 - 7 = 3<li>P3 종료, 3 + 9 = 12</ul></ol><li>이 경우 안전한 할당(Safe Allocation)이라고 한다.</ul><p><br /></p><div class="table-wrapper"><table><thead><tr><th>프로세스<th>현재 필요한 리소스의 수<th>최대로 필요한 리소스의 수<tbody><tr><td>P1<td>5<td>10<tr><td>P2<td>2<td>4<tr><td>P3<td>3<td>9</table></div><ul><li>os는 총 12개의 리소스를 보유하고 있다.<li>os가 적절하지 못한 리소스 분배로 프로세스가 교착 상태에 빠지는 것을<ul><li>불안전한 할당(Unsafe Allocation)이라고 한다.<ol><li>모든 프로세스에 필요한 리소스를 분배한다.</ol><ul><li>12 - 10 = 2<ol><li>P2에 리소스를 할당한다.</ol><li>2 - 2<li>P2 종료, 0 + 4<ol><li>P1이 필요한 리소스의 수는 5, P3이 필요한 리소스의 수는 6이다.</ol><li>os가 현재 할당해줄 수 있는 최대의 리소스 수는 4밖에 되지 못한다.<li>따라서 프로세스가 교착 상태에 빠지게 된다.</ul></ul></ul><p><br /> <br /></p><h2 id="deadlock-detection--recovery"><span class="mr-2">Deadlock Detection &amp; Recovery</span><a href="#deadlock-detection--recovery" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>교착 상태 검출 및 복구<li><p>데드락을 허용하고, 교착 상태를 감지하여, 교착 상태를 복구하는 방법</p><li>검출<ul><li>교착 상태에 빠진 프로세스가 있는지 검사한다.<li>검사하는데 오버헤드가 발생한다. (계산 비용, 메모리 등)</ul><li>복구<ul><li>자원 할당 직후에 교착 상태를 검출하면, 자원 할당 직전으로 상태를 되돌린다.<li>일부 프로세스를 강제 종료한다.<li>일부 리소스를 os가 선점하여 다른 프로세스에 할당한다.<li>역시 복구하는데도 오버헤드가 발생한다.</ul></ul><p><br /> <br /></p><h2 id="교착-상태-무시"><span class="mr-2">교착 상태 무시</span><a href="#교착-상태-무시" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>교착 상태를 위한 네 가지 필요 조건이 일어날 확률이 적다고 판단하여<li>그냥 무시하고 내비두는 경우</ul><p><br /> <br /> <br /> <br /></p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='//categories/cs/'>CS</a>, <a href='//categories/os/'>OS</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="//tags/cs/" class="post-tag no-text-decoration" >cs</a> <a href="//tags/os/" class="post-tag no-text-decoration" >os</a> <a href="//tags/process/" class="post-tag no-text-decoration" >process</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4+%EB%8F%99%EA%B8%B0%ED%99%94+-+Bogeun&url=https%3A%2F%2Fidiot2222.github.io%2Fposts%2F%25ED%2594%2584%25EB%25A1%259C%25EC%2584%25B8%25EC%258A%25A4_%25EB%258F%2599%25EA%25B8%25B0%25ED%2599%2594%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4+%EB%8F%99%EA%B8%B0%ED%99%94+-+Bogeun&u=https%3A%2F%2Fidiot2222.github.io%2Fposts%2F%25ED%2594%2584%25EB%25A1%259C%25EC%2584%25B8%25EC%258A%25A4_%25EB%258F%2599%25EA%25B8%25B0%25ED%2599%2594%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fidiot2222.github.io%2Fposts%2F%25ED%2594%2584%25EB%25A1%259C%25EC%2584%25B8%25EC%258A%25A4_%25EB%258F%2599%25EA%25B8%25B0%25ED%2599%2594%2F&text=%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4+%EB%8F%99%EA%B8%B0%ED%99%94+-+Bogeun" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/%EA%B8%B0%EA%B0%95_%EC%9E%90%EB%B0%94-02/">기강 자바-02</a><li><a href="/posts/%EA%B8%B0%EA%B0%95_%EC%9E%90%EB%B0%94-01/">기강 자바-01</a><li><a href="/posts/%EB%B9%84%EB%8F%99%EA%B8%B0_%EC%B2%98%EB%A6%AC/">비동기 처리</a><li><a href="/posts/%EC%8B%B1%EA%B8%80%ED%86%A4_%ED%8C%A8%ED%84%B4/">싱글톤 패턴</a><li><a href="/posts/%EC%8B%9C%ED%81%90%EB%A6%AC%ED%8B%B0_%EC%84%A4%EC%A0%95/">시큐리티 설정</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/cs/">cs</a> <a class="post-tag" href="/tags/network/">network</a> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/database/">database</a> <a class="post-tag" href="/tags/devops/">devops</a> <a class="post-tag" href="/tags/docker/">docker</a> <a class="post-tag" href="/tags/os/">os</a> <a class="post-tag" href="/tags/security/">security</a> <a class="post-tag" href="/tags/spring-mvc/">spring-mvc</a> <a class="post-tag" href="/tags/spring-security/">spring-security</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4_%EA%B4%80%EB%A6%AC/"><div class="card-body"> <em class="small" data-ts="1665489600" data-df="ll" > Oct 11, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>프로세스 관리</h3><div class="text-muted small"><p> Process의 개념 초기의 컴퓨터는 한 번에 하나의 프로그램만을 처리했다. 이 프로그램은 cpu, 메모리 등의 리소스들을 혼자 독차지했다. 이 프로그램은 리소스들의 접근에 대해 제한이 없었다. 이제는 컴퓨터가 발전되어 한 번에 여러개의 프로그램을 메모리에 올려서 처리하게 되었다. ...</p></div></div></a></div><div class="card"> <a href="/posts/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C%EB%9E%80/"><div class="card-body"> <em class="small" data-ts="1665133200" data-df="ll" > Oct 7, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>운영체제란</h3><div class="text-muted small"><p> 운영체제란 컴퓨터의 구조 Control program of computer. 컴퓨터의 자원(하드웨어)를 제어하여 컴퓨터의 성능을 향상 시키고, 사용자에게 편의성을 제공하는 프로그램이다. 운영체제가 하는 일의 범위는 정확히 정의할 수 없다. 예전에 어느 운영체제는 브라우저까지 관여를 ...</p></div></div></a></div><div class="card"> <a href="/posts/%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC%EB%9E%80/"><div class="card-body"> <em class="small" data-ts="1663752360" data-df="ll" > Sep 21, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>네트워크란</h3><div class="text-muted small"><p> 네트워크란 노드들이 통신할 수 있도록 연결된 통신망이다. 멀리, 넓게 분산된 컴퓨터들을 통신망으로 연결한 것이다. 네트워크 내에서 여러 노드들은 다른 노드와의 연결된 길을 통해 데이터를 보내고 받는다. 노드 네트워크에 속한 컴퓨터나 통신 기기들을 말한다. 인터넷 우리가 앱이나 웹, 게임 등을 할 때 ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="//posts/%EB%B9%84%EB%8F%99%EA%B8%B0_%EC%B2%98%EB%A6%AC/" class="btn btn-outline-primary" prompt="Older"><p>비동기 처리</p></a> <a href="//posts/L7-%EC%9D%91%EC%9A%A9_%EA%B3%84%EC%B8%B5/" class="btn btn-outline-primary" prompt="Newer"><p>L7 응용 계층</p></a></div></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2024 <a href="https://github.com/username">idiot2222</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/cs/">cs</a> <a class="post-tag" href="/tags/network/">network</a> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/database/">database</a> <a class="post-tag" href="/tags/devops/">devops</a> <a class="post-tag" href="/tags/docker/">docker</a> <a class="post-tag" href="/tags/os/">os</a> <a class="post-tag" href="/tags/security/">security</a> <a class="post-tag" href="/tags/spring-mvc/">spring-mvc</a> <a class="post-tag" href="/tags/spring-security/">spring-security</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
